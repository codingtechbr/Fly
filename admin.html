<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #434343 0%, #000000 100%);
            min-height: 100vh;
            color: #333;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1rem 0;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-content h1 {
            color: #667eea;
            font-size: 1.5rem;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-links a, .nav-links button {
            color: #555;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 1rem;
        }

        .nav-links a.active {
            background: #667eea;
            color: white;
        }

        .nav-links a:hover, .nav-links button:hover {
            background: #764ba2;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            margin-bottom: 2rem;
        }

        h2, h3 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        .subtitle {
            color: #666;
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-weight: 600;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        input[type="email"],
        input[type="password"],
        select,
        textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-success {
            background: #2ecc71;
            color: white;
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f8f9fa;
            color: #667eea;
            font-weight: 600;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-pago {
            background: #d4edda;
            color: #155724;
        }

        .status-pendente {
            background: #f8d7da;
            color: #721c24;
        }

        .login-container {
            max-width: 400px;
            margin: 5rem auto;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .chart-card h4 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        #loginSection, #adminSection, #graficosSection {
            display: none;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .nav-content {
                flex-direction: column;
                gap: 1rem;
            }

            .form-actions {
                flex-direction: column;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: 0.5rem;
            }
        }
        .logo-container {
    display: flex;
    align-items: center;
}

.logo {
    height: 50px;
    width: auto;
    margin-right: 1rem;
    border-radius: 10px;
}
@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }

    .nav-content {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }

    .nav-links {
        flex-direction: column;
        width: 100%;
    }

    .nav-links a, .nav-links button {
        width: 100%;
        text-align: left;
        padding: 0.8rem 1rem;
    }

    .form-actions {
        flex-direction: column;
    }

    .btn {
        width: 100%;
        text-align: center;
    }

    table {
        font-size: 0.9rem;
    }

    th, td {
        padding: 0.5rem;
    }

    .charts-grid {
        grid-template-columns: 1fr; /* Gráficos em coluna no mobile */
    }

    .chart-card {
        padding: 1rem;
    }

    .logo {
        height: 40px; /* um pouco menor no mobile */
    }

    #itensContainer .item {
        flex-direction: column;
        gap: 0.5rem;
    }

    #itensContainer .item select,
    #itensContainer .item input {
        width: 100%;
    }

    #itensContainer .item button {
        width: 100%;
    }
}
/* Mobile: transformar linhas da tabela em cards */
@media (max-width: 768px) {
    table, thead, tbody, th, td, tr {
        display: block;
    }

    thead tr {
        display: none; /* esconder cabeçalho, cada linha terá seus próprios labels */
    }

    tr {
        margin-bottom: 1rem;
        background: white;
        padding: 1rem;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    td {
        padding: 0.5rem 0;
        text-align: left;
        position: relative;
    }

    td::before {
        content: attr(data-label);
        position: absolute;
        left: 0;
        width: 50%;
        padding-left: 1rem;
        font-weight: 600;
        text-align: left;
        color: #667eea;
    }
}
@media (max-width: 768px) {
    .logo{width: 100px;
    height: 100px;}

    .charts-grid {
        display: flex;
        flex-direction: column; /* empilha os gráficos */
        gap: 1.5rem; /* espaço entre eles */
    }

    .chart-card {
        width: 100%; /* garante que ocupe toda a tela */
        padding: 1rem;
        box-sizing: border-box;
    }

    .chart-card canvas {
        width: 100% !important;
        height: auto !important;
    }
}
.chart-card canvas {
    width: 100% !important;
    height: auto !important;
}

    </style>
</head>
<body>
   
<nav class="navbar" id="navbar" style="display: none;">
    <div class="nav-content">
        <div class="logo-container">
            <img src="PHOTO-2025-10-23-15-30-45.jpg" alt="Logo" class="logo">
        </div>
        <h1>Sistema de Contratos - Admin</h1>
        <div class="nav-links">
            <a href="index.html">Área do Cliente</a>
            <a href="#" onclick="mostrarPainel(); return false;">Contratos</a>
            <a href="grafico.html" onclick="mostrarGraficos(); return false;">Gráficos</a>

            <button onclick="logoutAdmin()">Sair</button>
        </div>
    </div>
</nav>
    <div id="loginSection">
        <div class="login-container">
            <div class="card">
                <h2>Login Administrativo</h2>
                <p class="subtitle">Acesso restrito a administradores</p>

                <form onsubmit="loginAdmin(event)">
                    <div class="form-group">
                        <label for="emailLogin">Email</label>
                        <input type="email" id="emailLogin" required>
                    </div>

                    <div class="form-group">
                        <label for="senhaLogin">Senha</label>
                        <input type="password" id="senhaLogin" required>
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">Entrar</button>

                    <div id="loginError" class="error-message" style="display: none; margin-top: 1rem; background: #ff4757; color: white; padding: 1rem; border-radius: 8px;"></div>
                </form>
            </div>
        </div>
    </div>

    <div id="adminSection">
        <div class="container">
            <div class="card">

                <h2>Gerenciamento de Contratos</h2>
                <p class="subtitle">Cadastre e edite contratos de clientes</p>

                <form id="contractForm" onsubmit="salvarContrato(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nomeEmpresa">Nome da Empresa / Cliente *</label>
                            <input type="text" id="nomeEmpresa" required>
                        </div>
                    
                    <!-- Dentro do <form id="contractForm">, logo após o CPF -->
<div class="form-row">
    <div class="form-group">
        <label for="cpfCliente">CPF do Cliente *</label>
        <input type="text" id="cpfCliente" placeholder="000.000.000-00" maxlength="14" required>
    </div>

    <!-- NOVO CAMPO DE TELEFONE -->
    <div class="form-group">
        <label for="telefoneCliente">Telefone do Cliente *</label>
        <input type="text" id="telefoneCliente" placeholder="(XX) XXXXX-XXXX" maxlength="15" required>
    </div>
</div>
                    <!-- 🔥 Novo sistema de produtos -->
                    <div class="form-group">
                      <label for="itensContrato">Itens do Contrato *</label>
                      <div id="itensContainer">
                        <div class="item">
                          <select class="tipoItem" required onchange="calcularTotal()">
                            <option value="">Selecione...</option>
                            <option value="banner" data-preco="59.99">Banner (R$59,99)</option>
                            <option value="videoGif" data-preco="79.99">Vídeo GIF (R$79,99)</option>
                            <option value="videoEmpresarial" data-preco="99.99">Vídeo Empresarial (R$99,99)</option>
                          </select>
                          <input type="number" class="quantidadeItem" min="1" value="1" onchange="calcularTotal()" style="width:80px">
                          <button type="button" class="btn btn-secondary" onclick="removerItem(this)">🗑️</button>
                        </div>
                      </div>
                      <button type="button" class="btn btn-primary" onclick="adicionarItem()">+ Adicionar Item</button>
                    </div>

                    <div class="form-group">
                      <label for="desconto">Desconto (%)</label>
                      <input type="number" id="desconto" min="0" max="100" value="0" onchange="calcularTotal()">
                    </div>

                    <div class="form-group">
                      <label>Valor Total (R$)</label>
                      <input type="text" id="valorContrato" readonly>
                    </div>
                    <!-- 🔥 fim dos novos campos -->

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataVencimento">Data de Vencimento *</label>
                            <input type="date" id="dataVencimento" required>
                        </div>

                        <div class="form-group">
                            <label for="adminResponsavel">Admin Responsável *</label>
                            <input type="text" id="adminResponsavel" placeholder="Nome do responsável" required>
                        </div>

                        <div class="form-group">
                            <label for="cidade">Cidade *</label>
                            <select id="cidade" required>
                                <option value="">Selecione...</option>
                                <option value="Antas">Antas</option>
                                <option value="Cícero Dantas">Cícero Dantas</option>
                                <option value="Novo Triunfo">Novo Triunfo</option>
                                <option value="Sítio do Quinto">Sítio do Quinto</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="statusPagamento">
                                <span>Pagamento Confirmado</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="observacoes">Observações</label>
                        <textarea id="observacoes" rows="3"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Salvar</button>
                        <button type="button" class="btn btn-secondary" onclick="limparFormulario()">Limpar</button>
                    </div>

                    <input type="hidden" id="editId" value="">
                </form>
            </div>

            <div class="card">
                <h3>Contratos Cadastrados</h3>
                <div class="table-container">
                    <table id="contractsTable">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>CPF</th>
                                <th>Produto</th>
                                <th>Valor</th>
                                <th>Vencimento</th>
                                <th>Cidade</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="contractsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

<!-- Seção de gráficos -->
<section id="graficosSection" style="display:none; padding:20px;">
  <h2>Contratos por Cidade</h2>
  <canvas id="chartCidades" width="400" height="200"></canvas>

  <h2>Status de Pagamentos</h2>
  <canvas id="chartStatus" width="400" height="200"></canvas>

  <h2>Faturamento por Cidade</h2>
  <canvas id="chartFaturamento" width="400" height="200"></canvas>

  <h2>Gráfico simples (opcional)</h2>
  <canvas id="contratosChart" width="400" height="200"></canvas>
</section>


  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyBn58dQwxfp-WAIpU3jcGQJ1ZFhs7AHjTk",
        authDomain: "flymidia-ccd8f.firebaseapp.com",
        projectId: "flymidia-ccd8f",
        storageBucket: "flymidia-ccd8f.firebasestorage.app",
        messagingSenderId: "79513987797",
        appId: "1:79513987797:web:1f3854bcaaf4500001d05c",
        measurementId: "G-S89Y3ZTEG6"
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();
      console.log("Firebase inicializado no HTML antes do script.js");
      
    </script>

 
<script src="script.js"></script>




</body>
</html>
